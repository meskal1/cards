"use strict";(self.webpackChunkcards=self.webpackChunkcards||[]).push([[536],{6007:function(e,n,a){a.r(n),a.d(n,{Cards:function(){return Te}});var s=a(1413),r=a(885),t=a(2791),i=a(1835),c=a.n(i),o=a(7689),d=a(6977),l=a(3745),u=a(3379),m=a(2599),_=a(1311),h=a(8015),x=a(3294),f=a(4122),C=a(4229),j=a(395),v="Cards_cardsContainer__aYsFI",p="Cards_cards__controlBlock__qTx-z",w="Cards_imgContainer__b9F-k",b="Cards_img__cGe1w",g=a(172),N=a(1607),q=a(7358),k=a(824),Z="CardsTable_tableCards__2IL8g",y="CardsTable_cards__emptyBlock__Zf3yi",T="CardsTable_cards__emptyTitle__2rNiu",A="CardsTable_addButton__qsLXM",P=a(8447),M=a(7892),F=a.n(M),I=a(6174),D=a(4165),B=a(5861),S=a(1091),z="DeleteCard_Message__Tnij-",E="DeleteCard_ButtonContainer__C0jXa",R=a(184),U=function(e){var n=e.id,a=e.closeModal,s=(0,f.T)(),r=function(){var e=(0,B.Z)((0,D.Z)().mark((function e(){return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s((0,g.AM)(n));case 2:a();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{children:[(0,R.jsxs)("p",{className:z,children:["Are you sure you want to delete current Card?",(0,R.jsx)("br",{})]}),(0,R.jsxs)("div",{className:E,children:[(0,R.jsx)(S.Z,{onClick:a,type:"button",variant:"outlined",children:"Cancel"}),(0,R.jsx)(S.Z,{type:"button",variant:"contained",onClick:r,color:"error",children:"Delete"})]})]})},L=a(550),O=a(5705),Q=a(493),Y=a(5694),G="AddCard_CardContainer__mo31j",V="AddCard_CardTypeContainer__TFB0P",W="AddCard_CardTypeContainer__title__N71cw",X="AddCard_Type__PF-ag",J="AddCard_AddTextCard__681nC",K="AddCard_FormControl__62WV6",$="AddCard_Error__6K5zC",H="AddCard_Error__active__kkSbF",ee="AddCard_Submit__g8GPA",ne=function(e){var n=e.closeModal,a=e.cardsData,i=(0,f.T)(),c=(0,t.useState)(a.questionImg),o=(0,r.Z)(c,2),d=o[0],l=o[1],u=(0,O.TA)({initialValues:{question:a.question,answer:a.answer},validate:function(e){var n={};return e.question||(n.question="Question is required"),e.answer||(n.answer="Answer is required"),n},onSubmit:function(){var e=(0,B.Z)((0,D.Z)().mark((function e(s){var r,t;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.question,t=s.answer,a.question===r&&a.answer===t&&a.questionImg===d){e.next=6;break}return console.log("Check: ",a.questionImg===d),e.next=6,i((0,g.NB)({id:a.id,question:r,answer:t,questionImg:d}));case 6:n(!1),u.resetForm();case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),m=function(){var e=(0,B.Z)((0,D.Z)().mark((function e(n){var a,s;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.target.files&&n.target.files.length&&(a=n.target.files[0]).size<4e6&&a.type.includes("image")&&((s=new FileReader).onload=(0,B.Z)((0,D.Z)().mark((function e(){var n;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.result,e.next=3,l(n);case 3:case"end":return e.stop()}}),e)}))),s.readAsDataURL(a));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,R.jsxs)("div",{className:J,children:[(0,R.jsx)("h3",{children:"Edit Card"}),(0,R.jsxs)("form",{onSubmit:u.handleSubmit,children:[d?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:Y.Z.ImageContainer,children:(0,R.jsx)("img",{src:d,alt:"cover",className:Y.Z.Image,onError:function(e){var n=e.currentTarget;n.onerror=null,n.src=Q}})}),(0,R.jsxs)("label",{children:[(0,R.jsx)("input",{type:"file",hidden:!0,onChange:m,accept:"image/*"}),(0,R.jsx)(S.Z,{variant:"contained",className:Y.Z.FormFields,component:"span",children:"Upload Question Picture"})]})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(L.Z,(0,s.Z)({className:K,margin:"dense",size:"small",label:"question"},u.getFieldProps("question"))),(0,R.jsx)("div",{className:u.touched.question&&u.errors.question?"".concat($," ").concat(H):"".concat($),children:u.errors.question})]}),(0,R.jsx)(L.Z,(0,s.Z)({className:K,margin:"dense",size:"small",label:"answer"},u.getFieldProps("answer"))),(0,R.jsx)("div",{className:u.touched.answer&&u.errors.answer?"".concat($," ").concat(H):"".concat($),children:u.errors.answer}),(0,R.jsxs)("div",{className:ee,children:[(0,R.jsx)(S.Z,{variant:"outlined",onClick:function(){return n(!1)},type:"button",children:"Cancel"}),(0,R.jsx)(S.Z,{type:"submit",variant:"contained",disabled:!(!u.errors.answer&&!u.errors.question),children:"Edit"})]})]})]})},ae="CardActionsMenu_menuContainer__78870",se="CardActionsMenu_menu__aneCs",re="CardActionsMenu_openMenuLeft__SOq5z",te="CardActionsMenu_menuItem__5n86X",ie="CardActionsMenu_portalBgColor__rOWqi",ce="CardActionsMenu_modalsContainer__V6aMg",oe=a(5325),de=function(e){var n=e.handleEdit,a=e.handleDelete,s=e.closeMenu,r=(0,t.useRef)();return(0,oe.t)(r,s),(0,R.jsxs)("ul",{ref:r,className:se,onClick:s,children:[(0,R.jsx)("li",{className:te,onClick:n}),(0,R.jsx)("li",{className:te,onClick:a})]})},le=function(e){var n=e.cardID,a=e.answer,s=e.question,i=e.questionImg,c=(0,t.useState)(!1),o=(0,r.Z)(c,2),d=o[0],l=o[1],u=d?re:"",m=(0,t.useState)([0,0]),_=(0,r.Z)(m,2),h=_[0],x=_[1],f=h.reduce((function(e,n){return e+n}),0),C={id:n,answer:a,question:s,questionImg:i},j=f?ie:"",v=function(){return l(!d)},p=function(){x([0,0]),document.body.style.overflow="unset"};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(I.Z,{children:[(0,R.jsx)("div",{className:j,onClick:p}),!!f&&(0,R.jsxs)("div",{className:ce,children:[!!h[0]&&(0,R.jsx)(ne,{cardsData:C,closeModal:p}),!!h[1]&&(0,R.jsx)(U,{id:n,closeModal:p})]})]}),(0,R.jsx)("div",{className:"".concat(ae," ").concat(u),onClick:v,children:d&&(0,R.jsx)(de,{handleEdit:function(){x([1,0]),document.body.style.overflow="hidden"},handleDelete:function(){x([0,1]),document.body.style.overflow="hidden"},closeMenu:v})})]})},ue="CardsTableBody_packImageWrapper__jTYgK",me="CardsTableBody_packName__+98Gt",_e="CardsTableBody_packNameAdaptive__wntVX",he="CardsTableBody_packImage__jIYca",xe="CardsTableBody_tablePacks__body__vaIv+",fe="CardsTableBody_tablePacks__bodyRow__a2-l5",Ce="CardsTableBody_tablePacks__bodyCell__zSru2",je="CardsTableBody_tablePacks__bodyCellTitle__+pg2X",ve="CardsTableBody_tablePacks__bodyCellContent__NUIeh",pe=function(e){var n=e.heads,a=e.isMine,s=(0,f.C)((function(e){return e.cards.tableData})),r=(0,j.DU)();return(0,R.jsx)("tbody",{className:xe,children:s.map((function(e){return(0,R.jsxs)("tr",{className:fe,children:[n.map((function(n,a){var s=c()(e.questionImg,{mimeRequired:!0});return(0,R.jsx)("td",{className:Ce,scope:"row",onClick:function(){return n=e._id,a=e.cardsPack_id,void("loading"!==e.requestStatus&&r(x.m.LEARN+"/".concat(a),{state:{cardId:n}}));var n,a},children:(0,R.jsxs)("div",{className:ve,children:[(0,R.jsx)("div",{className:je,children:0===a?e[n.id]:n.label}),"question"===n.id&&s&&(0,R.jsx)("div",{className:ue,children:(0,R.jsx)("img",{src:e.questionImg,alt:"deckCover",className:he})}),"grade"===n.id?(0,R.jsx)(P.Z,{value:e[n.id],readOnly:!0}):(0,R.jsx)("p",{className:"".concat(_e," ").concat("question"===n.id&&s?me:""),children:"updated"===n.id?F()(e[n.id]).format("DD.MM.YYYY"):e[n.id]})]})},n.id)})),(0,R.jsx)("td",{className:Ce,children:a&&(0,R.jsx)(le,{cardID:e._id,answer:e.answer,question:e.question,questionImg:e.questionImg})})]},e._id)}))})},we=[{id:"question",label:"Question"},{id:"answer",label:"Answer"},{id:"grade",label:"Grade"},{id:"updated",label:"Last updated"}],be=(0,t.memo)((function(e){var n=e.isMine,a=e.showButton,s=e.handleTitleButton,r=(0,f.C)((function(e){return e.cards.status})),t=(0,f.C)((function(e){return e.cards.cardsData.cardsTotalCount})),i=(0,f.C)((function(e){return e.cards.queryParams.pageCount}));return(0,R.jsx)(R.Fragment,{children:t?(0,R.jsxs)("table",{className:Z,children:[(0,R.jsx)(k.E,{heads:we,forCards:!0,withActions:n}),"loading"===r?(0,R.jsx)(q.U,{columnsCount:we.length,rowsCount:i,withActions:n}):(0,R.jsx)(pe,{heads:we,isMine:n})]}):(0,R.jsx)(R.Fragment,{children:"loading"===r?(0,R.jsx)(m.A,{}):(0,R.jsxs)("div",{className:y,children:[(0,R.jsxs)("h3",{className:T,children:["No cards found. ",(0,R.jsx)("br",{}),n&&!a?"Click add new card to fill this pack":""]}),n&&!a&&(0,R.jsx)(N.o,{className:A,onClick:s,children:(0,R.jsx)("p",{children:"Add new card"})})]})})})})),ge=a(1898),Ne=a(4333),qe=a(9407),ke=function(e){var n=e.closeModal,a=e.cardsPack_id,i=(0,f.T)(),c=(0,t.useState)(""),o=(0,r.Z)(c,2),d=o[0],l=o[1],u=(0,O.TA)({initialValues:{question:d,answer:""},validate:function(e){var n={};return d||(n.question="Question is required"),e.answer||(n.answer="Answer is required"),n},onSubmit:function(){var e=(0,B.Z)((0,D.Z)().mark((function e(s){var r;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.values.answer,i((0,g.zJ)({cardsPack_id:a,question:" ",questionImg:d,answer:r})),n(!1),u.resetForm();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return(0,R.jsx)("div",{className:J,children:(0,R.jsxs)("form",{onSubmit:u.handleSubmit,children:[d?(0,R.jsx)("div",{className:Y.Z.ImageContainer,children:(0,R.jsx)("img",{src:d,alt:"cover",className:Y.Z.Image})}):"",(0,R.jsxs)("label",{children:[(0,R.jsx)("input",{type:"file",hidden:!0,onChange:function(e){if(e.target.files&&e.target.files.length){var n=e.target.files[0];if(n.size<4e6&&n.type.includes("image")){var a=new FileReader;a.onload=function(){var e=a.result;l(e)},a.readAsDataURL(n)}}},accept:"image/*"}),(0,R.jsx)(S.Z,{variant:"contained",className:Y.Z.FormFields,component:"span",children:"Add Question Picture"})]}),(0,R.jsx)("div",{className:u.touched.question&&u.errors.question?"".concat($," ").concat(H):"".concat($),children:u.errors.question}),(0,R.jsx)(L.Z,(0,s.Z)({className:K,margin:"dense",size:"small",label:"answer"},u.getFieldProps("answer"))),(0,R.jsx)("div",{className:u.touched.answer&&u.errors.answer?"".concat($," ").concat(H):"".concat($),children:u.errors.answer}),(0,R.jsxs)("div",{className:ee,children:[(0,R.jsx)(S.Z,{variant:"outlined",onClick:function(){return n(!1)},type:"button",children:"Cancel"}),(0,R.jsx)(S.Z,{type:"submit",variant:"contained",disabled:!(!u.errors.answer&&!u.errors.question),children:"Create"})]})]})})},Ze=function(e){var n=e.closeModal,a=e.cardsPack_id,r=(0,f.T)(),t=(0,O.TA)({initialValues:{question:"",answer:""},validate:function(e){var n={};return e.question||(n.question="Question is required"),e.answer||(n.answer="Answer is required"),n},onSubmit:function(){var e=(0,B.Z)((0,D.Z)().mark((function e(s){var i,c,o;return(0,D.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(s),i=t.values,c=i.question,o=i.answer,console.log("submit"),r((0,g.zJ)({cardsPack_id:a,question:c,answer:o})),n(!1),t.resetForm();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return(0,R.jsx)("div",{className:J,children:(0,R.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,R.jsx)(L.Z,(0,s.Z)({className:K,margin:"dense",size:"small",label:"question"},t.getFieldProps("question"))),(0,R.jsx)("div",{className:t.touched.question&&t.errors.question?"".concat($," ").concat(H):"".concat($),children:t.errors.question}),(0,R.jsx)(L.Z,(0,s.Z)({className:K,margin:"dense",size:"small",label:"answer"},t.getFieldProps("answer"))),(0,R.jsx)("div",{className:t.touched.answer&&t.errors.answer?"".concat($," ").concat(H):"".concat($),children:t.errors.answer}),(0,R.jsxs)("div",{className:ee,children:[(0,R.jsx)(S.Z,{variant:"outlined",onClick:function(){return n(!1)},type:"button",children:"Cancel"}),(0,R.jsx)(S.Z,{type:"submit",variant:"contained",disabled:!(!t.errors.answer&&!t.errors.question),children:"Create"})]})]})})},ye=function(e){var n=e.active,a=e.closeModal,s=e.cardsPack_id,i=(0,t.useState)(""),c=(0,r.Z)(i,2),o=c[0],d=c[1];(0,t.useEffect)((function(){n||d("")}),[n]);var l;switch(o){case"Text":l=(0,R.jsx)(Ze,{closeModal:a,cardsPack_id:s});break;case"Picture":l=(0,R.jsx)(ke,{closeModal:a,cardsPack_id:s});break;default:l=""}return(0,R.jsxs)("div",{className:G,children:[(0,R.jsxs)("div",{className:V,children:[(0,R.jsx)("p",{className:W,children:"Choose a question format"}),(0,R.jsx)("div",{className:X,children:(0,R.jsx)(ge.Z,{fullWidth:!0,children:(0,R.jsxs)(Ne.Z,{size:"small",id:"demo-simple-select",value:o,onChange:function(e){return d(e.target.value)},children:[(0,R.jsx)(qe.Z,{value:"Text",children:"Text"}),(0,R.jsx)(qe.Z,{value:"Picture",children:"Picture"})]})})})]}),(0,R.jsx)("div",{children:l})]})},Te=function(){var e=(0,o.UO)().id,n=(0,f.T)(),a=(0,C.v)(),i=(0,f.C)((function(e){return e.cards.cardsData.cardsTotalCount})),N=(0,f.C)(d.q),q=(0,f.C)((function(e){return e.cards.cardsData.packName})),k=(0,f.C)((function(e){return e.cards.cardsData.packDeckCover})),Z=(0,f.C)((function(e){return e.cards.error})),y=(0,j.DU)(),T=c()(k,{mimeRequired:!0}),A=a.cardQuestion?1:0,P=(0,t.useRef)(i||A||0);i&&!P.current&&P.current++;var M=(0,t.useState)(!1),F=(0,r.Z)(M,2),I=F[0],D=F[1],B=(0,t.useCallback)((function(){return D(!0)}),[]),S=(0,t.useCallback)((function(){return y(x.m.LEARN+"/".concat(e))}),[]);return(0,t.useEffect)((function(){"WRONG_ID"===Z&&(y(x.m.PAGE_NOT_FOUND,{replace:!0}),n((0,g.sT)({error:null})))}),[Z]),(0,t.useEffect)((function(){return n((0,g.az)((0,s.Z)((0,s.Z)({},a),{},{cardsPack_id:e}))),function(){n((0,g.j$)())}}),[]),(0,R.jsx)(R.Fragment,{children:q?(0,R.jsxs)("div",{className:v,children:[(0,R.jsxs)("div",{className:p,children:[(0,R.jsx)(h.C,{linkToPacks:!0,title:q,hasButtons:!!P.current,buttonClick:N?B:S}),T&&(0,R.jsx)("div",{className:w,children:(0,R.jsx)("img",{src:k,alt:"cover",className:b})}),!!P.current&&(0,R.jsx)(u.N,{forCards:!0})]}),(0,R.jsx)(be,{isMine:N,showButton:!!P.current,handleTitleButton:B}),(0,R.jsx)(l.$,{forCards:!0}),I?(0,R.jsx)(_.c,{active:I,setActive:D,children:(0,R.jsx)(ye,{active:I,closeModal:D,cardsPack_id:e||""})}):""]}):(0,R.jsx)(m.A,{})})}}}]);
//# sourceMappingURL=536.e2d3839f.chunk.js.map