"use strict";(self.webpackChunkcards=self.webpackChunkcards||[]).push([[536],{6007:function(e,n,a){a.r(n),a.d(n,{Cards:function(){return ye}});var s=a(1413),r=a(885),t=a(2791),i=a(1835),c=a.n(i),o=a(7689),d=a(6977),l=a(3745),u=a(3379),m=a(1311),_=a(8015),h=a(3294),x=a(4122),f=a(4229),C=a(395),j="Cards_cardsContainer__aYsFI",v="Cards_cards__controlBlock__qTx-z",p="Cards_imgContainer__b9F-k",w="Cards_img__cGe1w",b=a(172),g=a(1607),N=a(7358),q=a(824),k=a(2599),Z="CardsTable_tableCards__2IL8g",y="CardsTable_cards__emptyBlock__Zf3yi",A="CardsTable_cards__emptyTitle__2rNiu",T=a(8447),P=a(7892),M=a.n(P),I=a(6174),F=a(4165),D=a(5861),S=a(1091),B="DeleteCard_Message__Tnij-",z="DeleteCard_ButtonContainer__C0jXa",E=a(184),R=function(e){var n=e.id,a=e.closeModal,s=(0,x.T)(),r=function(){var e=(0,D.Z)((0,F.Z)().mark((function e(){return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s((0,b.AM)(n));case 2:a();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,E.jsxs)("div",{children:[(0,E.jsxs)("p",{className:B,children:["Are you sure you want to delete current Card?",(0,E.jsx)("br",{})]}),(0,E.jsxs)("div",{className:z,children:[(0,E.jsx)(S.Z,{onClick:a,type:"button",variant:"outlined",children:"Cancel"}),(0,E.jsx)(S.Z,{type:"button",variant:"contained",onClick:r,color:"error",children:"Delete"})]})]})},U=a(550),L=a(5705),Q=a(493),O=a(5694),Y="AddCard_CardContainer__mo31j",G="AddCard_CardTypeContainer__TFB0P",V="AddCard_CardTypeContainer__title__N71cw",W="AddCard_Type__PF-ag",X="AddCard_AddTextCard__681nC",J="AddCard_FormControl__62WV6",K="AddCard_Error__6K5zC",$="AddCard_Error__active__kkSbF",H="AddCard_Submit__g8GPA",ee=function(e){var n=e.closeModal,a=e.cardsData,i=(0,x.T)(),c=(0,t.useState)(a.questionImg),o=(0,r.Z)(c,2),d=o[0],l=o[1],u=(0,L.TA)({initialValues:{question:a.question,answer:a.answer},validate:function(e){var n={};return e.question||(n.question="Question is required"),e.answer||(n.answer="Answer is required"),n},onSubmit:function(){var e=(0,D.Z)((0,F.Z)().mark((function e(s){var r,t;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.question,t=s.answer,a.question===r&&a.answer===t&&a.questionImg===d){e.next=6;break}return console.log("Check: ",a.questionImg===d),e.next=6,i((0,b.NB)({id:a.id,question:r,answer:t,questionImg:d}));case 6:n(!1),u.resetForm();case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),m=function(){var e=(0,D.Z)((0,F.Z)().mark((function e(n){var a,s;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.target.files&&n.target.files.length&&(a=n.target.files[0]).size<4e6&&a.type.includes("image")&&((s=new FileReader).onload=(0,D.Z)((0,F.Z)().mark((function e(){var n;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.result,e.next=3,l(n);case 3:case"end":return e.stop()}}),e)}))),s.readAsDataURL(a));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,E.jsxs)("div",{className:X,children:[(0,E.jsx)("h3",{children:"Edit Card"}),(0,E.jsxs)("form",{onSubmit:u.handleSubmit,children:[d?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:O.Z.ImageContainer,children:(0,E.jsx)("img",{src:d,alt:"cover",className:O.Z.Image,onError:function(e){var n=e.currentTarget;n.onerror=null,n.src=Q}})}),(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"file",hidden:!0,onChange:m,accept:"image/*"}),(0,E.jsx)(S.Z,{variant:"contained",className:O.Z.FormFields,component:"span",children:"Upload Question Picture"})]})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(U.Z,(0,s.Z)({className:J,margin:"dense",size:"small",label:"question"},u.getFieldProps("question"))),(0,E.jsx)("div",{className:u.touched.question&&u.errors.question?"".concat(K," ").concat($):"".concat(K),children:u.errors.question})]}),(0,E.jsx)(U.Z,(0,s.Z)({className:J,margin:"dense",size:"small",label:"answer"},u.getFieldProps("answer"))),(0,E.jsx)("div",{className:u.touched.answer&&u.errors.answer?"".concat(K," ").concat($):"".concat(K),children:u.errors.answer}),(0,E.jsxs)("div",{className:H,children:[(0,E.jsx)(S.Z,{variant:"outlined",onClick:function(){return n(!1)},type:"button",children:"Cancel"}),(0,E.jsx)(S.Z,{type:"submit",variant:"contained",disabled:!(!u.errors.answer&&!u.errors.question),children:"Edit"})]})]})]})},ne="CardActionsMenu_menuContainer__78870",ae="CardActionsMenu_menu__aneCs",se="CardActionsMenu_openMenuLeft__SOq5z",re="CardActionsMenu_menuItem__5n86X",te="CardActionsMenu_portalBgColor__rOWqi",ie="CardActionsMenu_modalsContainer__V6aMg",ce=a(5325),oe=function(e){var n=e.handleEdit,a=e.handleDelete,s=e.closeMenu,r=(0,t.useRef)();return(0,ce.t)(r,s),(0,E.jsxs)("ul",{ref:r,className:ae,onClick:s,children:[(0,E.jsx)("li",{className:re,onClick:n}),(0,E.jsx)("li",{className:re,onClick:a})]})},de=function(e){var n=e.cardID,a=e.answer,s=e.question,i=e.questionImg,c=(0,t.useState)(!1),o=(0,r.Z)(c,2),d=o[0],l=o[1],u=d?se:"",m=(0,t.useState)([0,0]),_=(0,r.Z)(m,2),h=_[0],x=_[1],f=h.reduce((function(e,n){return e+n}),0),C={id:n,answer:a,question:s,questionImg:i},j=f?te:"",v=function(){return l(!d)},p=function(){x([0,0]),document.body.style.overflow="unset"};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(I.Z,{children:[(0,E.jsx)("div",{className:j,onClick:p}),!!f&&(0,E.jsxs)("div",{className:ie,children:[!!h[0]&&(0,E.jsx)(ee,{cardsData:C,closeModal:p}),!!h[1]&&(0,E.jsx)(R,{id:n,closeModal:p})]})]}),(0,E.jsx)("div",{className:"".concat(ne," ").concat(u),onClick:v,children:d&&(0,E.jsx)(oe,{handleEdit:function(){x([1,0]),document.body.style.overflow="hidden"},handleDelete:function(){x([0,1]),document.body.style.overflow="hidden"},closeMenu:v})})]})},le="CardsTableBody_packImageWrapper__jTYgK",ue="CardsTableBody_packName__+98Gt",me="CardsTableBody_packNameAdaptive__wntVX",_e="CardsTableBody_packImage__jIYca",he="CardsTableBody_tablePacks__body__vaIv+",xe="CardsTableBody_tablePacks__bodyRow__a2-l5",fe="CardsTableBody_tablePacks__bodyCell__zSru2",Ce="CardsTableBody_tablePacks__bodyCellTitle__+pg2X",je="CardsTableBody_tablePacks__bodyCellContent__NUIeh",ve=function(e){var n=e.heads,a=e.isMine,s=(0,x.C)((function(e){return e.cards.tableData})),r=(0,C.DU)();return(0,E.jsx)("tbody",{className:he,children:s.map((function(e){return(0,E.jsxs)("tr",{className:xe,children:[n.map((function(n,a){var s=c()(e.questionImg,{mimeRequired:!0});return(0,E.jsx)("td",{className:fe,scope:"row",onClick:function(){return n=e._id,a=e.cardsPack_id,void("loading"!==e.requestStatus&&r(h.m.LEARN+"/".concat(a),{state:{cardId:n}}));var n,a},children:(0,E.jsxs)("div",{className:je,children:[(0,E.jsx)("div",{className:Ce,children:0===a?e[n.id]:n.label}),"question"===n.id&&s&&(0,E.jsx)("div",{className:le,children:(0,E.jsx)("img",{src:e.questionImg,alt:"deckCover",className:_e})}),"grade"===n.id?(0,E.jsx)(T.Z,{value:e[n.id],readOnly:!0}):(0,E.jsx)("p",{className:"".concat(me," ").concat("question"===n.id&&s?ue:""),children:"updated"===n.id?M()(e[n.id]).format("DD.MM.YYYY"):e[n.id]})]})},n.id)})),(0,E.jsx)("td",{className:fe,children:a&&(0,E.jsx)(de,{cardID:e._id,answer:e.answer,question:e.question,questionImg:e.questionImg})})]},e._id)}))})},pe=[{id:"question",label:"Question"},{id:"answer",label:"Answer"},{id:"grade",label:"Grade"},{id:"updated",label:"Last updated"}],we=(0,t.memo)((function(e){var n=e.isMine,a=e.handleTitleButton,s=(0,x.C)((function(e){return e.cards.status})),r=(0,x.C)(d.Mw),t=(0,x.C)((function(e){return e.cards.queryParams.pageCount}));return(0,E.jsx)(E.Fragment,{children:r?(0,E.jsxs)("table",{className:Z,children:[(0,E.jsx)(q.E,{heads:pe,forCards:!0,withActions:n}),"loading"===s?(0,E.jsx)(N.U,{columnsCount:pe.length,rowsCount:t,withActions:n}):(0,E.jsx)(ve,{heads:pe,isMine:n})]}):(0,E.jsx)(E.Fragment,{children:"loading"===s?(0,E.jsx)(k.A,{}):(0,E.jsxs)("div",{className:y,children:[(0,E.jsx)("h3",{className:A,children:"No cards found. ".concat(n?"Click add new card to fill this pack":"")}),n&&(0,E.jsx)(g.o,{onClick:a,children:(0,E.jsx)("p",{children:"Add new card"})})]})})})})),be=a(1898),ge=a(4333),Ne=a(9407),qe=function(e){var n=e.closeModal,a=e.cardsPack_id,i=(0,x.T)(),c=(0,t.useState)(""),o=(0,r.Z)(c,2),d=o[0],l=o[1],u=(0,L.TA)({initialValues:{question:d,answer:""},validate:function(e){var n={};return d||(n.question="Question is required"),e.answer||(n.answer="Answer is required"),n},onSubmit:function(){var e=(0,D.Z)((0,F.Z)().mark((function e(s){var r;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.values.answer,i((0,b.zJ)({cardsPack_id:a,question:" ",questionImg:d,answer:r})),n(!1),u.resetForm();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return(0,E.jsx)("div",{className:X,children:(0,E.jsxs)("form",{onSubmit:u.handleSubmit,children:[d?(0,E.jsx)("div",{className:O.Z.ImageContainer,children:(0,E.jsx)("img",{src:d,alt:"cover",className:O.Z.Image})}):"",(0,E.jsxs)("label",{children:[(0,E.jsx)("input",{type:"file",hidden:!0,onChange:function(e){if(e.target.files&&e.target.files.length){var n=e.target.files[0];if(n.size<4e6&&n.type.includes("image")){var a=new FileReader;a.onload=function(){var e=a.result;l(e)},a.readAsDataURL(n)}}},accept:"image/*"}),(0,E.jsx)(S.Z,{variant:"contained",className:O.Z.FormFields,component:"span",children:"Add Question Picture"})]}),(0,E.jsx)("div",{className:u.touched.question&&u.errors.question?"".concat(K," ").concat($):"".concat(K),children:u.errors.question}),(0,E.jsx)(U.Z,(0,s.Z)({className:J,margin:"dense",size:"small",label:"answer"},u.getFieldProps("answer"))),(0,E.jsx)("div",{className:u.touched.answer&&u.errors.answer?"".concat(K," ").concat($):"".concat(K),children:u.errors.answer}),(0,E.jsxs)("div",{className:H,children:[(0,E.jsx)(S.Z,{variant:"outlined",onClick:function(){return n(!1)},type:"button",children:"Cancel"}),(0,E.jsx)(S.Z,{type:"submit",variant:"contained",disabled:!(!u.errors.answer&&!u.errors.question),children:"Create"})]})]})})},ke=function(e){var n=e.closeModal,a=e.cardsPack_id,r=(0,x.T)(),t=(0,L.TA)({initialValues:{question:"",answer:""},validate:function(e){var n={};return e.question||(n.question="Question is required"),e.answer||(n.answer="Answer is required"),n},onSubmit:function(){var e=(0,D.Z)((0,F.Z)().mark((function e(s){var i,c,o;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(s),i=t.values,c=i.question,o=i.answer,console.log("submit"),r((0,b.zJ)({cardsPack_id:a,question:c,answer:o})),n(!1),t.resetForm();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return(0,E.jsx)("div",{className:X,children:(0,E.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,E.jsx)(U.Z,(0,s.Z)({className:J,margin:"dense",size:"small",label:"question"},t.getFieldProps("question"))),(0,E.jsx)("div",{className:t.touched.question&&t.errors.question?"".concat(K," ").concat($):"".concat(K),children:t.errors.question}),(0,E.jsx)(U.Z,(0,s.Z)({className:J,margin:"dense",size:"small",label:"answer"},t.getFieldProps("answer"))),(0,E.jsx)("div",{className:t.touched.answer&&t.errors.answer?"".concat(K," ").concat($):"".concat(K),children:t.errors.answer}),(0,E.jsxs)("div",{className:H,children:[(0,E.jsx)(S.Z,{variant:"outlined",onClick:function(){return n(!1)},type:"button",children:"Cancel"}),(0,E.jsx)(S.Z,{type:"submit",variant:"contained",disabled:!(!t.errors.answer&&!t.errors.question),children:"Create"})]})]})})},Ze=function(e){var n=e.active,a=e.closeModal,s=e.cardsPack_id,i=(0,t.useState)(""),c=(0,r.Z)(i,2),o=c[0],d=c[1];(0,t.useEffect)((function(){n||d("")}),[n]);var l;switch(o){case"Text":l=(0,E.jsx)(ke,{closeModal:a,cardsPack_id:s});break;case"Picture":l=(0,E.jsx)(qe,{closeModal:a,cardsPack_id:s});break;default:l=""}return(0,E.jsxs)("div",{className:Y,children:[(0,E.jsxs)("div",{className:G,children:[(0,E.jsx)("p",{className:V,children:"Choose a question format"}),(0,E.jsx)("div",{className:W,children:(0,E.jsx)(be.Z,{fullWidth:!0,children:(0,E.jsxs)(ge.Z,{size:"small",id:"demo-simple-select",value:o,onChange:function(e){return d(e.target.value)},children:[(0,E.jsx)(Ne.Z,{value:"Text",children:"Text"}),(0,E.jsx)(Ne.Z,{value:"Picture",children:"Picture"})]})})})]}),(0,E.jsx)("div",{children:l})]})},ye=function(){var e=(0,o.UO)().id,n=(0,x.T)(),a=(0,f.v)(),i=(0,x.C)(d.Mw),g=(0,x.C)(d.qs),N=(0,x.C)((function(e){return e.cards.cardsData.packName})),q=(0,x.C)((function(e){return e.cards.cardsData.packDeckCover})),k=(0,x.C)((function(e){return e.cards.error})),Z=(0,C.DU)(),y=c()(q,{mimeRequired:!0}),A=i||a.cardQuestion?"".concat(g?"Add new card":"Learn to pack"):"",T=(0,t.useState)(!1),P=(0,r.Z)(T,2),M=P[0],I=P[1],F=(0,t.useCallback)((function(){return I(!0)}),[]);return(0,t.useEffect)((function(){"WRONG_ID"===k&&(Z(h.m.PAGE_NOT_FOUND,{replace:!0}),n((0,b.sT)({error:null})))}),[k]),(0,t.useEffect)((function(){return n((0,b.az)((0,s.Z)((0,s.Z)({},a),{},{cardsPack_id:e}))),function(){n((0,b.j$)())}}),[]),(0,E.jsxs)("div",{className:j,children:[(0,E.jsxs)("div",{className:v,children:[(0,E.jsx)(_.C,{linkToPacks:!0,title:N,button:A,buttonClick:g?F:function(){return Z(h.m.LEARN+"/".concat(e))}}),y&&(0,E.jsx)("div",{className:p,children:(0,E.jsx)("img",{src:q,alt:"cover",className:w})}),(i||a.cardQuestion)&&(0,E.jsx)(u.N,{forCards:!0})]}),(0,E.jsx)(we,{isMine:g,handleTitleButton:F}),(0,E.jsx)(l.$,{forCards:!0}),M?(0,E.jsx)(m.c,{active:M,setActive:I,children:(0,E.jsx)(Ze,{active:M,closeModal:I,cardsPack_id:e||""})}):""]})}}}]);
//# sourceMappingURL=536.b67ae9d1.chunk.js.map