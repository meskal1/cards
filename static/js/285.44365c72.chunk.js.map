{"version":3,"file":"static/js/285.44365c72.chunk.js","mappings":"0JAEA,GAAeA,EAAAA,EAAAA,IAA4BC,EAAAA,EAAAA,KAAK,OAAQ,CACtDC,EAAG,6DACD,qB,2DCHJ,EAAyC,4CAAzC,EAA0G,wCCU7FC,EAAc,WACzB,IAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAmBC,EAAAA,EAAAA,IAAe,SAAAC,GAAK,OAAIA,EAAMC,MAAMC,WAAW,IAClEC,EACkB,aAAtBP,EAASQ,SAA0B,GAAK,KAAMC,EAAAA,EAAAA,GAAYP,EAAkBQ,EAAAA,IAE9E,OACE,+BACE,UAAC,KAAI,CAACC,UAAWC,EAA0BC,GAAIC,EAAAA,EAAAA,MAAaP,EAAiB,WAC3E,SAACQ,EAAiB,CAACJ,UAAWC,KAC9B,kDAIR,C,wFCxBA,EAAwB,2B,sCCSXI,EAAwC,SAAH,GAA6C,IAAvCL,EAAS,EAATA,UAAWM,EAAU,EAAVA,WAAeC,GAAK,YAC/EC,EAAU,UAAMP,EAAO,YAAID,GAAwB,IACnDS,EAAYH,GAA0B,IAE5C,OACE,SAACI,EAAA,GAAS,gBACRV,UAAWQ,EACXG,QAASJ,EAAMI,SAAW,WAC1BC,KAAML,EAAMK,MAAQ,OACpBC,UAAWN,EAAMM,YAAa,GAC1BN,GAAK,IACTD,WAAYG,IAGlB,C,sJCvBA,EAAiC,qCAAjC,EAAmF,iCAAnF,EAA+H,+BAA/H,EAAuK,6BAAvK,EAAkN,kC,SCUrMK,GAAqCC,EAAAA,EAAAA,OAAK,YAAqB,IAAlBC,EAAU,EAAVA,WAClDC,GAAOzB,EAAAA,EAAAA,IAAe,SAAAC,GAAK,OAAIA,EAAMyB,QAAQC,SAASF,IAAI,IAChE,GAAoCG,EAAAA,EAAAA,UAASH,GAAc,IAAG,eAAvDI,EAAU,KAAEC,EAAa,KAChC,GAAwCF,EAAAA,EAAAA,WAAS,GAAM,eAAhDG,EAAY,KAAEC,EAAe,KACpC,GAA8CJ,EAAAA,EAAAA,WAAS,GAAM,eAAtDK,EAAe,KAAEC,EAAkB,KAC1C,GAAgDN,EAAAA,EAAAA,UAAS,IAAG,eAArDO,EAAgB,KAAEC,EAAmB,KAetCC,EAAmB,SAACC,GAExB,GADC,OAADA,QAAC,IAADA,GAAAA,EAAGC,iBACuB,KAAtBV,EAAWW,OAIb,OAHAN,GAAmB,QACnBE,EAAoB3B,GAIpBuB,GAAgB,GAGdH,EAAWW,SAAWf,GACxBD,EAAWK,EAAWW,OAE1B,EAUMC,EAAc,WAClBX,EAAcL,GAAc,IAC5BO,GAAgB,GAChBE,GAAmB,EACrB,EAYA,OACE,8BACGH,GACC,iBAAKvB,UAAWC,EAAiB,WAC/B,SAACI,EAAA,EAAW,CACV6B,MAAOb,EACPc,OAAQF,EACRG,UAjBoB,SAACN,GACf,UAAVA,EAAEO,KACJR,IAGY,WAAVC,EAAEO,KACJJ,GAEJ,EAUUK,SAhCmB,SAACR,GACS,KAAjCA,EAAES,cAAcL,MAAMF,QACxBN,GAAmB,GAGrBJ,EAAcQ,EAAES,cAAcL,MAChC,EA2BUM,WAAW,EACXC,aAAc,eACdC,MAAOjB,EACPkB,WAAY,CACVC,WAAY,CAAEC,MAAO,CAAEC,UAAW,eAGtC,gBACE9C,UAAS,UAAKC,EAAY,YAAI0B,GAC9BoB,YAAalB,EACbmB,QAtEoB,WACxBvB,GACFG,EAAoB3B,EAExB,EAmEUgD,eAzEsB,WAAH,OAASrB,EAAoB,GAAG,QA6EvD,iCACE,iBAAM5B,UAAWC,EAAW,SAAEgB,KAC9B,gBAAKjB,UAAWC,EAAU+C,QAvEX,WACrB1B,EAAcD,EAAWW,QACzBR,GAAgB,EAClB,QAyEF,I,oBCrGA,EAAmC,kCAAnC,EAAwF,kCAAxF,EAAqP,gCAArP,EAA2V,sCAA3V,EAAgZ,8BAAhZ,EAA6b,8BAA7b,EAAif,qCAAjf,EAA0iB,mCAA1iB,EAAqpB,oCAArpB,EAA2sB,iCAA3sB,EAAkwB,qC,UCarvB0B,EAAU,WACrB,IAAMC,GAAWC,EAAAA,EAAAA,KACXC,GAAQ7D,EAAAA,EAAAA,IAAe,SAAAC,GAAK,OAAIA,EAAMyB,QAAQC,SAASkC,KAAK,IAC5DC,GAAS9D,EAAAA,EAAAA,IAAe,SAAAC,GAAK,OAAIA,EAAMyB,QAAQC,SAASmC,MAAM,IAI9DC,GAAuBC,EAAAA,EAAAA,cAC3B,SAACC,GACCN,GAASO,EAAAA,EAAAA,IAAiB,CAAEzC,KAAMwC,IACpC,GACA,CAACN,KAGHQ,EAAAA,EAAAA,YAAU,WACR,OAAO,WACLR,GAASS,EAAAA,EAAAA,MACX,CACF,GAAG,IA0BH,OACE,+BACE,iBAAK5D,UAAWC,EAAmB,WACjC,SAACb,EAAA,EAAW,KACZ,iBAAKY,UAAWC,EAAmB,WACjC,eAAID,UAAWC,EAAiB,mCAChC,iBAAKD,UAAWC,EAAuB,WACrC,gBAAKD,UAAWC,EAAe,UAC7B,gBACED,UAAWC,EACX4D,IAAKP,GAAkBQ,EACvBC,IAAI,SACJC,QAhBiB,WAC7B,OAkBQ,8BACE,kBACEpD,KAAK,OACL0B,SA1Ca,SAACR,GAC1B,GAAIA,EAAEmC,OAAOC,OAASpC,EAAEmC,OAAOC,MAAMC,OAAQ,CAC3C,IAAMC,EAAOtC,EAAEmC,OAAOC,MAAM,GAE5B,GAAIE,EAAKC,KAAO,KAAWD,EAAKxD,KAAK0D,SAAS,SAAU,CACtD,IAAMC,EAAS,IAAIC,WAEnBD,EAAOE,OAAS,WACd,IAAMC,EAASH,EAAOI,OAEtBxB,GAASO,EAAAA,EAAAA,IAAiB,CAAEJ,OAAQoB,IACtC,EAEAH,EAAOK,cAAcR,EACvB,MACEjB,GAAS0B,EAAAA,EAAAA,IAAmB,CAAEC,YAAa,mBAAoBC,YAAa,UAEhF,CACF,EAyBclC,MAAO,CAAEmC,QAAS,QAClBC,OAAQ,aAEV,gBAAKjF,UAAWC,WAGpB,gBAAKD,UAAWC,EAAoB,UAClC,SAACa,EAAY,CAACE,WAAYuC,OAE5B,cAAGvD,UAAWC,EAAqB,SAAEoD,KACrC,SAAC6B,EAAA,EAAY,CAAClF,UAAWC,EAAmB+C,QApE7B,WAAH,OAASG,GAASgC,EAAAA,EAAAA,MAAW,EAoE2B,UAClE,cAAGnF,UAAWC,EAAsB,8BAMhD,C","sources":["../node_modules/@mui/icons-material/esm/KeyboardBackspace.js","webpack://cards/./src/common/components/BackToPacks/BackToPacks.module.scss?b64e","common/components/BackToPacks/BackToPacks.tsx","webpack://cards/./src/common/components/CustomInput/CustomInput.module.scss?ad3d","common/components/CustomInput/CustomInput.tsx","webpack://cards/./src/common/components/EditableSpan/EditableSpan.module.scss?b028","common/components/EditableSpan/EditableSpan.tsx","webpack://cards/./src/features/profile/Profile.module.scss?6070","features/profile/Profile.tsx"],"sourcesContent":["import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z\"\n}), 'KeyboardBackspace');","// extracted by mini-css-extract-plugin\nexport default {\"backToPacks__linkPacks\":\"BackToPacks_backToPacks__linkPacks__ez79f\",\"backToPacks__arrow\":\"BackToPacks_backToPacks__arrow__L0n+Y\"};","import { KeyboardBackspace } from '@mui/icons-material'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { PATH } from '../../../constants/routePaths.enum'\r\nimport { initialPacksQueryParams as initParams } from '../../../features/packs/packsSlice'\r\nimport { useAppSelector } from '../../../hooks/reduxHooks'\r\nimport { queryString } from '../../../utils/queryString'\r\nimport { useLocationNoUpdates } from '../../../utils/routerUtils'\r\n\r\nimport s from './BackToPacks.module.scss'\r\n\r\nexport const BackToPacks = () => {\r\n  const location = useLocationNoUpdates()\r\n  const packsQueryParams = useAppSelector(state => state.packs.queryParams)\r\n  const packsQueryString =\r\n    location.pathname === '/profile' ? '' : '?' + queryString(packsQueryParams, initParams)\r\n\r\n  return (\r\n    <>\r\n      <Link className={s.backToPacks__linkPacks} to={PATH.PACKS + packsQueryString}>\r\n        <KeyboardBackspace className={s.backToPacks__arrow} />\r\n        <p>Back to packs list</p>\r\n      </Link>\r\n    </>\r\n  )\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"input\":\"CustomInput_input__4vgJw\"};","import { FC } from 'react'\r\n\r\nimport { TextField, TextFieldProps } from '@mui/material'\r\n\r\nimport s from './CustomInput.module.scss'\r\n\r\ntype CustomInputPropsType = TextFieldProps & {\r\n  value: string //Use our value to control input and also because value in MUI has unknown type\r\n}\r\n\r\nexport const CustomInput: FC<CustomInputPropsType> = ({ className, helperText, ...props }) => {\r\n  const finalClass = `${s.input} ${className ? className : ''}`\r\n  const errorText = helperText ? helperText : ' '\r\n\r\n  return (\r\n    <TextField\r\n      className={finalClass}\r\n      variant={props.variant || 'standard'}\r\n      type={props.type || 'text'}\r\n      fullWidth={props.fullWidth || true}\r\n      {...props}\r\n      helperText={errorText}\r\n    />\r\n  )\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"inputContainer\":\"EditableSpan_inputContainer__iMl27\",\"sendButton\":\"EditableSpan_sendButton__jZgQo\",\"userName\":\"EditableSpan_userName__kgfOm\",\"marker\":\"EditableSpan_marker__jy8nl\",\"errorButton\":\"EditableSpan_errorButton__JDJG1\",\"animateErrorButton\":\"EditableSpan_animateErrorButton__3smvd\"};","import { memo, useState, MouseEvent, ChangeEvent, KeyboardEvent, FC } from 'react'\r\n\r\nimport { useAppSelector } from '../../../hooks/reduxHooks'\r\nimport { CustomInput } from '../CustomInput/CustomInput'\r\n\r\nimport s from './EditableSpan.module.scss'\r\n\r\ntype EditableSpanType = {\r\n  changeName: (name: string) => void\r\n}\r\n\r\nexport const EditableSpan: FC<EditableSpanType> = memo(({ changeName }) => {\r\n  const name = useAppSelector(state => state.profile.userData.name)\r\n  const [inputValue, setInputValue] = useState(name ? name : '')\r\n  const [isInEditMode, setIsInEditMode] = useState(false)\r\n  const [errorEmptyField, setErrorEmptyField] = useState(false)\r\n  const [errorStyleButton, setErrorStyleButton] = useState('')\r\n\r\n  const handleAnimationEndError = () => setErrorStyleButton('')\r\n\r\n  const handleErrorSetNewName = () => {\r\n    if (errorEmptyField) {\r\n      setErrorStyleButton(s.errorButton)\r\n    }\r\n  }\r\n\r\n  const handleEditMode = () => {\r\n    setInputValue(inputValue.trim())\r\n    setIsInEditMode(true)\r\n  }\r\n\r\n  const handleSetNewName = (e?: MouseEvent<HTMLDivElement>) => {\r\n    e?.preventDefault()\r\n    if (inputValue.trim() === '') {\r\n      setErrorEmptyField(true)\r\n      setErrorStyleButton(s.errorButton)\r\n\r\n      return\r\n    } else {\r\n      setIsInEditMode(false)\r\n    }\r\n\r\n    if (inputValue.trim() !== name) {\r\n      changeName(inputValue.trim())\r\n    }\r\n  }\r\n\r\n  const onChangeInputHandler = (e: ChangeEvent<HTMLInputElement>) => {\r\n    if (e.currentTarget.value.trim() !== '') {\r\n      setErrorEmptyField(false)\r\n    }\r\n\r\n    setInputValue(e.currentTarget.value)\r\n  }\r\n\r\n  const onBlurInput = () => {\r\n    setInputValue(name ? name : '')\r\n    setIsInEditMode(false)\r\n    setErrorEmptyField(false)\r\n  }\r\n\r\n  const onKeyDownInputHandler = (e: KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Enter') {\r\n      handleSetNewName()\r\n    }\r\n\r\n    if (e.key === 'Escape') {\r\n      onBlurInput()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {isInEditMode ? (\r\n        <div className={s.inputContainer}>\r\n          <CustomInput\r\n            value={inputValue}\r\n            onBlur={onBlurInput}\r\n            onKeyDown={onKeyDownInputHandler}\r\n            onChange={onChangeInputHandler}\r\n            autoFocus={true}\r\n            autoComplete={'new-password'}\r\n            error={errorEmptyField}\r\n            InputProps={{\r\n              inputProps: { style: { textAlign: 'center' } },\r\n            }}\r\n          />\r\n          <div\r\n            className={`${s.sendButton} ${errorStyleButton}`}\r\n            onMouseDown={handleSetNewName}\r\n            onClick={handleErrorSetNewName}\r\n            onAnimationEnd={handleAnimationEndError}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <span className={s.userName}>{name}</span>\r\n          <div className={s.marker} onClick={handleEditMode} />\r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n})\r\n","// extracted by mini-css-extract-plugin\nexport default {\"profileContainer\":\"Profile_profileContainer__TQBsh\",\"profile__content\":\"Profile_profile__content__ysyQW\",\"profile__linkPacks\":\"Profile_profile__linkPacks__8MS3X\",\"profile__arrow\":\"Profile_profile__arrow__Ib2KW\",\"profile__title\":\"Profile_profile__title__YLrQj\",\"profile__form\":\"Profile_profile__form__9YK8q\",\"profile__avatarBlock\":\"Profile_profile__avatarBlock__HYY4r\",\"profile__pic\":\"Profile_profile__pic__749ru\",\"profile__img\":\"Profile_profile__img__dyT94\",\"profile__avatarIcon\":\"Profile_profile__avatarIcon__APPKr\",\"profile__userName\":\"Profile_profile__userName__7xtU4\",\"profile__marker\":\"Profile_profile__marker__SJMxU\",\"profile__userEmail\":\"Profile_profile__userEmail__UFRFm\",\"profile__button\":\"Profile_profile__button__6m94J\",\"profile__buttonIcon\":\"Profile_profile__buttonIcon__gSWb9\"};","import { ChangeEvent, useCallback, useEffect } from 'react'\r\n\r\nimport { setAppAlertMessage } from '../../app/appSlice'\r\nimport avatarLocal from '../../assets/img/avatar.jpg'\r\nimport { BackToPacks } from '../../common/components/BackToPacks/BackToPacks'\r\nimport { CustomButton } from '../../common/components/CustomButton/CustomButton'\r\nimport { EditableSpan } from '../../common/components/EditableSpan/EditableSpan'\r\nimport { useAppDispatch, useAppSelector } from '../../hooks/reduxHooks'\r\nimport { logOutTC } from '../auth/authSlice'\r\nimport { clearPacksQueryParams } from '../packs/packsSlice'\r\n\r\nimport s from './Profile.module.scss'\r\nimport { updateUserDataTC } from './profileSlice'\r\n\r\nexport const Profile = () => {\r\n  const dispatch = useAppDispatch()\r\n  const email = useAppSelector(state => state.profile.userData.email)\r\n  const avatar = useAppSelector(state => state.profile.userData.avatar)\r\n\r\n  const handleOnLogOut = () => dispatch(logOutTC())\r\n\r\n  const handleChangeUserName = useCallback(\r\n    (newName: string) => {\r\n      dispatch(updateUserDataTC({ name: newName }))\r\n    },\r\n    [dispatch]\r\n  )\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch(clearPacksQueryParams())\r\n    }\r\n  }, [])\r\n\r\n  const handleUploadAvatar = (e: ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files.length) {\r\n      const file = e.target.files[0]\r\n\r\n      if (file.size < 4000000 && file.type.includes('image')) {\r\n        const reader = new FileReader()\r\n\r\n        reader.onload = () => {\r\n          const file64 = reader.result as string\r\n\r\n          dispatch(updateUserDataTC({ avatar: file64 }))\r\n        }\r\n\r\n        reader.readAsDataURL(file)\r\n      } else {\r\n        dispatch(setAppAlertMessage({ messageText: 'image is invalid', messageType: 'error' }))\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleInputAvatarError = () => {\r\n    //dispatch(setAppAlertMessage({ messageText: 'image is invalid', messageType: 'error' }))\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={s.profileContainer}>\r\n        <BackToPacks />\r\n        <div className={s.profile__content}>\r\n          <h2 className={s.profile__title}>Personal information</h2>\r\n          <div className={s.profile__avatarBlock}>\r\n            <div className={s.profile__pic}>\r\n              <img\r\n                className={s.profile__img}\r\n                src={avatar ? avatar : avatarLocal}\r\n                alt=\"avatar\"\r\n                onError={handleInputAvatarError}\r\n              />\r\n            </div>\r\n            <label>\r\n              <input\r\n                type=\"file\"\r\n                onChange={handleUploadAvatar}\r\n                style={{ display: 'none' }}\r\n                accept={'image/*'}\r\n              />\r\n              <div className={s.profile__avatarIcon} />\r\n            </label>\r\n          </div>\r\n          <div className={s.profile__userName}>\r\n            <EditableSpan changeName={handleChangeUserName} />\r\n          </div>\r\n          <p className={s.profile__userEmail}>{email}</p>\r\n          <CustomButton className={s.profile__button} onClick={handleOnLogOut}>\r\n            <p className={s.profile__buttonIcon}>Log out</p>\r\n          </CustomButton>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"],"names":["createSvgIcon","_jsx","d","BackToPacks","location","useLocationNoUpdates","packsQueryParams","useAppSelector","state","packs","queryParams","packsQueryString","pathname","queryString","initParams","className","s","to","PATH","KeyboardBackspace","CustomInput","helperText","props","finalClass","errorText","TextField","variant","type","fullWidth","EditableSpan","memo","changeName","name","profile","userData","useState","inputValue","setInputValue","isInEditMode","setIsInEditMode","errorEmptyField","setErrorEmptyField","errorStyleButton","setErrorStyleButton","handleSetNewName","e","preventDefault","trim","onBlurInput","value","onBlur","onKeyDown","key","onChange","currentTarget","autoFocus","autoComplete","error","InputProps","inputProps","style","textAlign","onMouseDown","onClick","onAnimationEnd","Profile","dispatch","useAppDispatch","email","avatar","handleChangeUserName","useCallback","newName","updateUserDataTC","useEffect","clearPacksQueryParams","src","avatarLocal","alt","onError","target","files","length","file","size","includes","reader","FileReader","onload","file64","result","readAsDataURL","setAppAlertMessage","messageText","messageType","display","accept","CustomButton","logOutTC"],"sourceRoot":""}