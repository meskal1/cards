"use strict";(self.webpackChunkcards=self.webpackChunkcards||[]).push([[468],{7136:function(e,n,t){t.r(n),t.d(n,{Cards:function(){return Ie}});var a=t(4165),i=t(1413),r=t(5861),o=t(885),s=t(2791),c=t(7689),l=t(1607),d=t(9955),u=t(3379),v=t(1311),m=t(6272),f=t(3294),p=t(4122),h=t(6182),x=t(1898),C=t(4333),y=t(9407),Z="AddCard_CardContainer__diKK3",b="AddCard_CardTypeContainer__A06+5",j="AddCard_CardTypeContainer__title__RDPxd",g="AddCard_Type__CYCU8",_="AddCard_AddTextCard__I8Xrs",w="AddCard_FormControl__unQDm",A="AddCard_Error__Na4zN",S="AddCard_Error__active__E2+oH",N="AddCard_Submit__rIp4n",F=t(1091),k=t(550),E=t(5705),q=t(172),M=t(184),T=function(e){var n=e.closeModal,t=e.cardsPack_id,o=(0,p.T)(),s=(0,E.TA)({initialValues:{question:"",answer:""},validate:function(e){var n={};return e.question||(n.question="Question is required"),e.answer||(n.answer="Answer is required"),n},onSubmit:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(i){var r,c,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(i),r=s.values,c=r.question,l=r.answer,console.log("submit"),o((0,q.zJ)({cardsPack_id:t,question:c,answer:l})),n(!1),s.resetForm();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});return(0,M.jsx)("div",{className:_,children:(0,M.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,M.jsx)(k.Z,(0,i.Z)({className:w,margin:"dense",size:"small",label:"question"},s.getFieldProps("question"))),(0,M.jsx)("div",{className:s.touched.question&&s.errors.question?"".concat(A," ").concat(S):"".concat(A),children:s.errors.question}),(0,M.jsx)(k.Z,(0,i.Z)({className:w,margin:"dense",size:"small",label:"answer"},s.getFieldProps("answer"))),(0,M.jsx)("div",{className:s.touched.answer&&s.errors.answer?"".concat(A," ").concat(S):"".concat(A),children:s.errors.answer}),(0,M.jsxs)("div",{className:N,children:[(0,M.jsx)(F.Z,{variant:"outlined",onClick:function(){return n(!1)},type:"button",children:"Cancel"}),(0,M.jsx)(F.Z,{type:"submit",variant:"contained",disabled:!(!s.errors.answer&&!s.errors.question),children:"Create"})]})]})})},P=function(e){var n=e.active,t=e.closeModal,a=e.cardsPack_id,i=s.useState(""),r=(0,o.Z)(i,2),c=r[0],l=r[1];s.useEffect((function(){n||l("")}),[n]);var d;switch(c){case"Text":d=(0,M.jsx)(T,{closeModal:t,cardsPack_id:a});break;case"Picture":d=(0,M.jsx)("p",{children:"Add picture"});break;default:d=""}return(0,M.jsxs)("div",{className:Z,children:[(0,M.jsxs)("div",{className:b,children:[(0,M.jsx)("p",{className:j,children:"Choose a question format"}),(0,M.jsx)("div",{className:g,children:(0,M.jsx)(x.Z,{fullWidth:!0,children:(0,M.jsxs)(C.Z,{size:"small",id:"demo-simple-select",value:c,onChange:function(e){return l(e.target.value)},children:[(0,M.jsx)(y.Z,{value:"Text",children:"Text"}),(0,M.jsx)(y.Z,{value:"Picture",children:"Picture"})]})})})]}),(0,M.jsx)("div",{children:d})]})},V="Cards_cardsContainer__aYsFI",z="Cards_cards__controlBlock__qTx-z",R="Cards_cards__controlPanel__Jwuoa",L="Cards_cards__emptyBlock__yl8qV",D="Cards_cards__emptyTitle__DOGFd",O=t(6015),H=t(286),I=t(1680),B=t(9963),Q=t(7358),Y=t(824),G=t(273),U=t(4942),W=t(3366),X=t(7462),J=t(8182),K=t(5573),$=t(4419),ee=t(4142),ne=t(9853),te=t(1853),ae=t(5178),ie=t(5559),re=t(7933),oe=t(1245),se=(0,oe.Z)((0,M.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),ce=(0,oe.Z)((0,M.jsx)("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder"),le=t(5513),de=t(277),ue=t(5878),ve=t(1217);function me(e){return(0,ve.Z)("MuiRating",e)}var fe=(0,ue.Z)("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),pe=["value"],he=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function xe(e,n){if(null==e)return e;var t=Math.round(e/n)*n;return Number(t.toFixed(function(e){var n=e.toString().split(".")[1];return n?n.length:0}(n)))}var Ce=(0,de.ZP)("span",{name:"MuiRating",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[(0,U.Z)({},"& .".concat(fe.visuallyHidden),n.visuallyHidden),n.root,n["size".concat((0,ne.Z)(t.size))],t.readOnly&&n.readOnly]}})((function(e){var n,t=e.theme,a=e.ownerState;return(0,X.Z)((n={display:"inline-flex",position:"relative",fontSize:t.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent"},(0,U.Z)(n,"&.".concat(fe.disabled),{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"}),(0,U.Z)(n,"&.".concat(fe.focusVisible," .").concat(fe.iconActive),{outline:"1px solid #999"}),(0,U.Z)(n,"& .".concat(fe.visuallyHidden),K.Z),n),"small"===a.size&&{fontSize:t.typography.pxToRem(18)},"large"===a.size&&{fontSize:t.typography.pxToRem(30)},a.readOnly&&{pointerEvents:"none"})})),ye=(0,de.ZP)("label",{name:"MuiRating",slot:"Label",overridesResolver:function(e,n){var t=e.ownerState;return[n.label,t.emptyValueFocused&&n.labelEmptyValueActive]}})((function(e){var n=e.ownerState;return(0,X.Z)({cursor:"inherit"},n.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})})),Ze=(0,de.ZP)("span",{name:"MuiRating",slot:"Icon",overridesResolver:function(e,n){var t=e.ownerState;return[n.icon,t.iconEmpty&&n.iconEmpty,t.iconFilled&&n.iconFilled,t.iconHover&&n.iconHover,t.iconFocus&&n.iconFocus,t.iconActive&&n.iconActive]}})((function(e){var n=e.theme,t=e.ownerState;return(0,X.Z)({display:"flex",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest}),pointerEvents:"none"},t.iconActive&&{transform:"scale(1.2)"},t.iconEmpty&&{color:(n.vars||n).palette.action.disabled})})),be=(0,de.ZP)("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:function(e){return(0,de.Dz)(e)&&"iconActive"!==e},overridesResolver:function(e,n){var t=e.iconActive;return[n.decimal,t&&n.iconActive]}})((function(e){var n=e.iconActive;return(0,X.Z)({position:"relative"},n&&{transform:"scale(1.2)"})}));function je(e){var n=(0,W.Z)(e,pe);return(0,M.jsx)("span",(0,X.Z)({},n))}function ge(e){var n=e.classes,t=e.disabled,a=e.emptyIcon,i=e.focus,r=e.getLabelText,o=e.highlightSelectedOnly,c=e.hover,l=e.icon,d=e.IconContainerComponent,u=e.isActive,v=e.itemValue,m=e.labelProps,f=e.name,p=e.onBlur,h=e.onChange,x=e.onClick,C=e.onFocus,y=e.readOnly,Z=e.ownerState,b=e.ratingValue,j=o?v===b:v<=b,g=v<=c,_=v<=i,w=v===e.ratingValueRounded,A=(0,te.Z)(),S=(0,M.jsx)(Ze,{as:d,value:v,className:(0,J.Z)(n.icon,j?n.iconFilled:n.iconEmpty,g&&n.iconHover,_&&n.iconFocus,u&&n.iconActive),ownerState:(0,X.Z)({},Z,{iconEmpty:!j,iconFilled:j,iconHover:g,iconFocus:_,iconActive:u}),children:a&&!j?a:l});return y?(0,M.jsx)("span",(0,X.Z)({},m,{children:S})):(0,M.jsxs)(s.Fragment,{children:[(0,M.jsxs)(ye,(0,X.Z)({ownerState:(0,X.Z)({},Z,{emptyValueFocused:void 0}),htmlFor:A},m,{children:[S,(0,M.jsx)("span",{className:n.visuallyHidden,children:r(v)})]})),(0,M.jsx)("input",{className:n.visuallyHidden,onFocus:C,onBlur:p,onChange:h,onClick:x,disabled:t,value:v,id:A,type:"radio",name:f,checked:w})]})}var _e=(0,M.jsx)(se,{fontSize:"inherit"}),we=(0,M.jsx)(ce,{fontSize:"inherit"});function Ae(e){return"".concat(e," Star").concat(1!==e?"s":"")}var Se=s.forwardRef((function(e,n){var t=(0,le.Z)({name:"MuiRating",props:e}),a=t.className,i=t.defaultValue,r=void 0===i?null:i,c=t.disabled,l=void 0!==c&&c,d=t.emptyIcon,u=void 0===d?we:d,v=t.emptyLabelText,m=void 0===v?"Empty":v,f=t.getLabelText,p=void 0===f?Ae:f,h=t.highlightSelectedOnly,x=void 0!==h&&h,C=t.icon,y=void 0===C?_e:C,Z=t.IconContainerComponent,b=void 0===Z?je:Z,j=t.max,g=void 0===j?5:j,_=t.name,w=t.onChange,A=t.onChangeActive,S=t.onMouseLeave,N=t.onMouseMove,F=t.precision,k=void 0===F?1:F,E=t.readOnly,q=void 0!==E&&E,T=t.size,P=void 0===T?"medium":T,V=t.value,z=(0,W.Z)(t,he),R=(0,te.Z)(_),L=(0,ae.Z)({controlled:V,default:r,name:"Rating"}),D=(0,o.Z)(L,2),O=D[0],H=D[1],I=xe(O,k),B=(0,ee.Z)(),Q=s.useState({hover:-1,focus:-1}),Y=(0,o.Z)(Q,2),G=Y[0],U=G.hover,K=G.focus,oe=Y[1],se=I;-1!==U&&(se=U),-1!==K&&(se=K);var ce=(0,ie.Z)(),de=ce.isFocusVisibleRef,ue=ce.onBlur,ve=ce.onFocus,fe=ce.ref,pe=s.useState(!1),Ze=(0,o.Z)(pe,2),Se=Ze[0],Ne=Ze[1],Fe=s.useRef(),ke=(0,re.Z)(fe,Fe,n),Ee=function(e){var n=""===e.target.value?null:parseFloat(e.target.value);-1!==U&&(n=U),H(n),w&&w(e,n)},qe=function(e){0===e.clientX&&0===e.clientY||(oe({hover:-1,focus:-1}),H(null),w&&parseFloat(e.target.value)===I&&w(e,null))},Me=function(e){ve(e),!0===de.current&&Ne(!0);var n=parseFloat(e.target.value);oe((function(e){return{hover:e.hover,focus:n}}))},Te=function(e){if(-1===U){ue(e),!1===de.current&&Ne(!1);oe((function(e){return{hover:e.hover,focus:-1}}))}},Pe=s.useState(!1),Ve=(0,o.Z)(Pe,2),ze=Ve[0],Re=Ve[1],Le=(0,X.Z)({},t,{defaultValue:r,disabled:l,emptyIcon:u,emptyLabelText:m,emptyValueFocused:ze,focusVisible:Se,getLabelText:p,icon:y,IconContainerComponent:b,max:g,precision:k,readOnly:q,size:P}),De=function(e){var n=e.classes,t=e.size,a=e.readOnly,i=e.disabled,r=e.emptyValueFocused,o=e.focusVisible,s={root:["root","size".concat((0,ne.Z)(t)),i&&"disabled",o&&"focusVisible",a&&"readyOnly"],label:["label","pristine"],labelEmptyValue:[r&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return(0,$.Z)(s,me,n)}(Le);return(0,M.jsxs)(Ce,(0,X.Z)({ref:ke,onMouseMove:function(e){N&&N(e);var n,t=Fe.current,a=t.getBoundingClientRect(),i=a.right,r=a.left,o=t.firstChild.getBoundingClientRect().width;n="rtl"===B.direction?(i-e.clientX)/(o*g):(e.clientX-r)/(o*g);var s=xe(g*n+k/2,k);s=function(e,n,t){return e<n?n:e>t?t:e}(s,k,g),oe((function(e){return e.hover===s&&e.focus===s?e:{hover:s,focus:s}})),Ne(!1),A&&U!==s&&A(e,s)},onMouseLeave:function(e){S&&S(e);oe({hover:-1,focus:-1}),A&&-1!==U&&A(e,-1)},className:(0,J.Z)(De.root,a),ownerState:Le,role:q?"img":null,"aria-label":q?p(se):null},z,{children:[Array.from(new Array(g)).map((function(e,n){var t=n+1,a={classes:De,disabled:l,emptyIcon:u,focus:K,getLabelText:p,highlightSelectedOnly:x,hover:U,icon:y,IconContainerComponent:b,name:R,onBlur:Te,onChange:Ee,onClick:qe,onFocus:Me,ratingValue:se,ratingValueRounded:I,readOnly:q,ownerState:Le},i=t===Math.ceil(se)&&(-1!==U||-1!==K);if(k<1){var r=Array.from(new Array(1/k));return(0,M.jsx)(be,{className:(0,J.Z)(De.decimal,i&&De.iconActive),ownerState:Le,iconActive:i,children:r.map((function(e,n){var i=xe(t-1+(n+1)*k,k);return(0,M.jsx)(ge,(0,X.Z)({},a,{isActive:!1,itemValue:i,labelProps:{style:r.length-1===n?{}:{width:i===se?"".concat((n+1)*k*100,"%"):"0%",overflow:"hidden",position:"absolute"}}}),i)}))},t)}return(0,M.jsx)(ge,(0,X.Z)({},a,{isActive:i,itemValue:t}),t)})),!q&&!l&&(0,M.jsxs)(ye,{className:(0,J.Z)(De.label,De.labelEmptyValue),ownerState:Le,children:[(0,M.jsx)("input",{className:De.visuallyHidden,value:"",id:"".concat(R,"-empty"),type:"radio",name:R,checked:null==I,onFocus:function(){return Re(!0)},onBlur:function(){return Re(!1)},onChange:Ee}),(0,M.jsx)("span",{className:De.visuallyHidden,children:m})]})]}))})),Ne=t(9773),Fe=t(4390),ke=t(807),Ee=t(7892),qe=t.n(Ee),Me=t(8069),Te=t(2483),Pe="CardsActionCell_span__jV1+4",Ve=function(e){var n=e.isAllDisabled,t=e.onEdit,a=e.onDelete;return(0,M.jsx)(Fe.Z,{children:(0,M.jsxs)("span",{className:Pe,onClick:function(e){return e.stopPropagation()},children:[(0,M.jsx)(Te.E,{disabled:n,onClick:function(){return t()},tooltip:"Edit"}),(0,M.jsx)(Me.W,{disabled:n,onClick:function(){return a()},tooltip:"Delete"})]})})},ze="CardsTableBody_row__uQLmt",Re="CardsTableBody_tableCellText__giTaM",Le=function(e){var n=e.heads,t=e.isMine,a=e.openEdit,i=e.setEditData,r=(0,p.C)((function(e){return e.cards.tableData})),o=(0,p.T)(),s=(0,c.s0)();return(0,M.jsx)(Ne.Z,{children:r.map((function(e){return(0,M.jsxs)(ke.Z,{hover:"idle"===e.requestStatus,className:ze,onClick:function(){return n=e._id,t=e.cardsPack_id,void("loading"!==e.requestStatus&&s(f.m.LEARN+"/".concat(t,"/").concat(n)));var n,t},children:[n.map((function(n){return(0,M.jsx)(Fe.Z,{children:"grade"===n.id?(0,M.jsx)(Se,{value:e[n.id],readOnly:!0}):(0,M.jsx)("p",{className:Re,children:"updated"===n.id?qe()(e[n.id]).format("DD.MM.YYYY"):e[n.id]})},n.id)})),t&&(0,M.jsx)(Ve,{isAllDisabled:"loading"===e.requestStatus,onEdit:function(){return n={id:e._id,question:e.question,answer:e.answer},a(!0),void i(n);var n},onDelete:function(){return n=e._id,void o((0,q.AM)(n));var n}})]},e._id)}))})},De=[{id:"question",label:"Question"},{id:"answer",label:"Answer"},{id:"updated",label:"Last updated"},{id:"grade",label:"Grade"}],Oe=function(e){var n=e.isMine,t=e.openEdit,a=e.setEditData,i=(0,p.C)((function(e){return e.cards.status})),r=(0,p.C)((function(e){return e.cards.queryParams.sortCards})),o=(0,p.C)((function(e){return e.cards.queryParams.pageCount})),s=(0,p.T)(),c=r.slice(0,1),l=r.slice(1),d=c===G.G.asc?"asc":"desc";return(0,M.jsx)(O.Z,{children:(0,M.jsx)(H.Z,{children:(0,M.jsx)(B.Z,{children:(0,M.jsxs)(I.Z,{children:[(0,M.jsx)(Y.E,{heads:De,order:d,orderBy:l,onSetSort:function(e){var n=l===e&&"asc"===d?"desc":"asc",t="".concat(G.G[n]).concat(e);s((0,q.iI)({sortCards:t}))},withActions:n}),"loading"===i?(0,M.jsx)(Q.U,{columnsCount:De.length,rowsCount:o,withActions:n}):(0,M.jsx)(Le,{heads:De,isMine:n,openEdit:t,setEditData:a})]})})})})},He=function(e){e.active;var n=e.closeModal,t=e.cardsData,o=(0,p.T)(),s=(0,E.TA)({initialValues:{question:t.question,answer:t.answer},validate:function(e){var n={};return e.question||(n.question="Question is required"),e.answer||(n.answer="Answer is required"),n},onSubmit:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(i){var r,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=i.question,c=i.answer,o((0,q.NB)({id:t.id,question:r,answer:c})),n(!1),s.resetForm();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()});console.log("Question: ",s.values.question);return(0,M.jsxs)("div",{className:_,children:[(0,M.jsx)("h3",{children:"Edit Card"}),(0,M.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,M.jsx)(k.Z,(0,i.Z)({className:w,margin:"dense",size:"small",label:"question"},s.getFieldProps("question"))),(0,M.jsx)("div",{className:s.touched.question&&s.errors.question?"".concat(A," ").concat(S):"".concat(A),children:s.errors.question}),(0,M.jsx)(k.Z,(0,i.Z)({className:w,margin:"dense",size:"small",label:"answer"},s.getFieldProps("answer"))),(0,M.jsx)("div",{className:s.touched.answer&&s.errors.answer?"".concat(A," ").concat(S):"".concat(A),children:s.errors.answer}),(0,M.jsxs)("div",{className:N,children:[(0,M.jsx)(F.Z,{variant:"outlined",onClick:function(){return n(!1)},type:"button",children:"Cancel"}),(0,M.jsx)(F.Z,{type:"submit",variant:"contained",disabled:!(!s.errors.answer&&!s.errors.question),children:"Create"})]})]})]})},Ie=function(){var e=(0,p.T)(),n=(0,h.E)(),t=s.useState(!1),x=(0,o.Z)(t,2),C=x[0],y=x[1],Z=(0,p.C)((function(e){return e.cards.tableData})),b=(0,p.C)((function(e){return e.cards.queryParams.cardsPack_id})),j=(0,p.C)((function(e){return e.cards.cardsData.packName})),g=(0,p.C)((function(e){return e.cards.cardsData.packUserId})),_=(0,p.C)((function(e){return e.profile.userData.id})),w=(0,p.C)((function(e){return e.cards.error})),A=!!Z.length,S=g===_,N=(0,c.UO)().id,F=(0,c.s0)(),k=A||n.cardQuestion?"".concat(S?"add new card":"learn to pack"):"",E=s.useState(!1),T=(0,o.Z)(E,2),O=T[0],H=T[1],I=s.useState(!1),B=(0,o.Z)(I,2),Q=B[0],Y=B[1],G=s.useState({id:"",answer:"",question:""}),U=(0,o.Z)(G,2),W=U[0],X=U[1],J=s.useCallback((function(){H(!0)}),[]),K=s.useCallback((function(){F(f.m.LEARN+"/".concat(N))}),[]);return s.useEffect((function(){""!==b&&b===N||(0,r.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e((0,q.iI)((0,i.Z)((0,i.Z)({},n),{},{cardsPack_id:N})));case 2:y(!0);case 3:case"end":return t.stop()}}),t)})))()}),[N]),s.useEffect((function(){"WRONG_ID"===w&&(F(f.m.PAGE_NOT_FOUND,{replace:!0}),e((0,q.sT)({error:null})))}),[w]),s.useEffect((function(){return function(){e((0,q.j$)())}}),[]),(0,M.jsx)(M.Fragment,{children:C&&(0,M.jsxs)("div",{className:V,children:[(0,M.jsxs)("div",{className:z,children:[(0,M.jsx)(m.C,{linkToPacks:!0,title:j,button:k,buttonClick:S?J:K}),(A||n.cardQuestion)&&(0,M.jsx)("div",{className:R,children:(0,M.jsx)(u.N,{cards:!0})})]}),A?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Oe,{isMine:S,openEdit:Y,setEditData:X}),(0,M.jsx)(d.$,{cards:!0})]}):(0,M.jsxs)("div",{className:L,children:[(0,M.jsx)("h3",{className:D,children:"no cards found. ".concat(S?"Click add new card to fill this pack":"")}),S&&(0,M.jsx)(l.o,{onClick:J,children:(0,M.jsx)("p",{children:"add new card"})})]}),O?(0,M.jsx)(v.c,{active:O,setActive:H,children:(0,M.jsx)(P,{active:O,closeModal:H,cardsPack_id:b})}):"",Q?(0,M.jsx)(v.c,{active:Q,setActive:Y,children:(0,M.jsx)(He,{closeModal:Y,cardsData:W,active:Q})}):""]})})}}}]);
//# sourceMappingURL=468.d269fc33.chunk.js.map